<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Remnant Protocol</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
body { margin:0; background:black; font-family:'Orbitron',sans-serif; }
#root { width:100vw;height:100vh; }
button { cursor:pointer; }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">

const WS_URL = "wss://remnant-multiplayer-server.onrender.com"; 
const ws = new WebSocket(WS_URL);

function App(){
  const [gameState,setGameState] = React.useState('MENU');
  const [sessionId,setSessionId] = React.useState(null);
  const [joinId,setJoinId] = React.useState('');

  React.useEffect(()=>{
    ws.onopen=()=>console.log("Connected to server");
    ws.onmessage=(e)=>console.log("Server:",e.data);
  },[]);

  return (
    <div style={{width:'100%',height:'100%',color:'white',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'}}>
      {gameState==='MENU'&&<>
        <h1>Remnant Protocol</h1>
        <button onClick={()=>setGameState('CAMPAIGN')}>Campaign</button>
        <button onClick={()=>setGameState('MULTIPLAYER')}>Multiplayer</button>
      </>}
      
      {gameState==='CAMPAIGN'&&<>
        <h2>Level Select</h2>
        <button onClick={()=>alert('Level 0-1 started!')}>0-1 Alpha Sweep</button>
        <button onClick={()=>alert('Level 0-2 started!')}>0-2 Bravo Link</button>
        <button onClick={()=>setGameState('MENU')}>Back</button>
      </>}
      
      {gameState==='MULTIPLAYER'&&<>
        <h2>Multiplayer</h2>
        <button onClick={()=>{
          ws.send(JSON.stringify({type:'HOST'}));
          setGameState('HOST_MENU');
        }}>Host Game</button>
        <input placeholder="Enter ID" value={joinId} onChange={e=>setJoinId(e.target.value)}/>
        <button onClick={()=>{
          if(joinId) ws.send(JSON.stringify({type:'JOIN',sessionId:joinId}));
        }}>Join Game</button>
        <button onClick={()=>setGameState('MENU')}>Back</button>
        {sessionId&&<div>Session ID: {sessionId}</div>}
      </>}

      {gameState==='HOST_MENU'&&<>
        <h2>Host Options</h2>
        <p>Your session ID: {sessionId||'...'}</p>
        <button onClick={()=>alert('FFA started!')}>FFA Mode</button>
        <button onClick={()=>setGameState('MENU')}>Back</button>
      </>}
    </div>
  )
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);

</script>
</body>
</html>
